<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5. Uniformity Tests • rankingQ</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="5. Uniformity Tests">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rankingQ</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/v1-basic-setup.html">1. Basic Setup</a></li>
    <li><a class="dropdown-item" href="../articles/v2-bias-correction.html">2. Correcting Bias in Ranking Data</a></li>
    <li><a class="dropdown-item" href="../articles/v3-analysis.html">3. Analysis of Bias-corrected Ranking Data</a></li>
    <li><a class="dropdown-item" href="../articles/v4-visualizing-rankings.html">4. Visualizing Rankings</a></li>
    <li><a class="dropdown-item" href="../articles/v5-uniformity-test.html">5. Uniformity Tests</a></li>
    <li><a class="dropdown-item" href="../articles/v6-simulate-data.html">6. Simulating Ranking Data</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sysilviakim/rankingQ/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>5. Uniformity Tests</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sysilviakim/rankingQ/blob/main/vignettes/v5-uniformity-test.Rmd" class="external-link"><code>vignettes/v5-uniformity-test.Rmd</code></a></small>
      <div class="d-none name"><code>v5-uniformity-test.Rmd</code></div>
    </div>

    
    
<p>In this vignette, we show how to detect the presence of random
responses using the <strong>uniformity test</strong>. This test is based
on the idea that given respondent-level item order randomization,
recorded responses will follow a uniform distribution in the absence of
random responses. The uniformity test can be easily implemented even
when researchers do not have any anchor ranking questions.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sysilviakim/rankingQ" class="external-link">rankingQ</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">identity</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="recorded-responses">Recorded Responses<a class="anchor" aria-label="anchor" href="#recorded-responses"></a>
</h2>
<p>In an earlier vignette, we showed how to perform bias correction on
ranking questions using the anchor question. But how do we know if there
is a need for bias correction in the first place?</p>
<p>The distribution of rankings of <em>recorded responses</em> can show
whether there are indeed random responses. Before we demonstrate this,
first, we must clarify: what are recorded responses? The following
figure shows the difference between <em>observed ranking</em> and
<em>recorded response</em>, given item order randomization.</p>
<p><img src="../reference/figures/AtsusakaKimFigA1.jpg" width="100%" style="display: block; margin: auto;"></p>
<p>Suppose that we prefer items a-b-c in that order. And in the ranking
exercise, they were presented in the order of a-b-c. Then, given the
ordered reference set a-b-c, my observed ranking and recorded response
are both 1-2-3. Recorded responses are identical to observed rankings
when item orders are fixed. However, when an item order is not fixed,
the observed choice set differs across respondents.</p>
<p>If, for example, the items were presented in the order of c-b-a, then
our observed ranking is 1-2-3, while our recorded response is 3-2-1.
This is because the <em>observed ranking</em> is the ranking of the
items in the order of the reference set, regardless of the order in
which they were presented. On the other hand, the <em>recorded
response</em> is the ranking of the items in the order in which they
were presented.</p>
</div>
<div class="section level2">
<h2 id="recovering-recorded-responses">Recovering Recorded Responses<a class="anchor" aria-label="anchor" href="#recovering-recorded-responses"></a>
</h2>
<p>The function <code>recover_recorded_responses</code> recovers the
recorded responses from the observed rankings and the item order
randomization. The function takes the <code>true_order</code>,
<code>presented_order</code>, and <code>df</code> for data frame as
arguments.</p>
<p>For example, in <code>identity</code>, the <code>app_identity</code>
column contains the observed rankings, and the
<code>app_identity_row_rnd</code> column contains the how the items were
presented via item order randomization. Thus the presented order is
<code>app_identity_row_rnd</code> and the true order is
<code>app_identity</code>.</p>
<p>For the first respondent, with the reference choice set of {party,
religion, gender, race}, this respondent ranked
party-gender-race-religion (1-4-2-3, i.e., party is first place,
religion is fourth place, gender is second place, and race is third
place). However, the items were presented to the respondent in the order
of religion-party-race-gender (2-1-4-3). Thus, the recorded response is
4-1-3-2 (first option shown was religion, thus fourth place, second
option shown was party, thus first place, the third option shown was
race, thus third place, and the fourth and last option shown was gender,
thus second place). It’s a bit tricky at first, so please read this
explanation carefully!</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/recover_recorded_responses.html">recover_recorded_responses</a></span><span class="op">(</span></span>
<span>  presented_order <span class="op">=</span> <span class="st">"app_identity_row_rnd"</span>,</span>
<span>  true_order <span class="op">=</span> <span class="st">"app_identity"</span>,</span>
<span>  df <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">identity</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"app_identity"</span>, <span class="st">"app_identity_row_rnd"</span><span class="op">)</span><span class="op">]</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">#&gt;    app_identity app_identity_row_rnd app_identity_recorded</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1423         2143                 4132                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1423         1324                 1243                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3412         2134                 4312                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1423         3421                 2341                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 4132         2134                 1432                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 3124         4123                 4312                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1234         3124                 3124                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 4312         1234                 4312                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 3124         4132                 4321                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 4321         1432                 4123</span></span>
<span></span>
<span><span class="co">## Alternatively, for the first respondent</span></span>
<span><span class="fu"><a href="../reference/recover_recorded_responses.html">recover_recorded_responses</a></span><span class="op">(</span></span>
<span>  presented_order <span class="op">=</span> <span class="st">"2143"</span>,</span>
<span>  true_order <span class="op">=</span> <span class="st">"1423"</span>,</span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "4132"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="uniformity-test">Uniformity Test<a class="anchor" aria-label="anchor" href="#uniformity-test"></a>
</h2>
<div class="section level3">
<h3 id="theory">Theory<a class="anchor" aria-label="anchor" href="#theory"></a>
</h3>
<p>In <a href="https://osf.io/3ys8x" class="external-link">Atsusaka and Kim (2024)</a>, we
prove that once there is item order randomization, the recorded
responses will follow a uniform distribution in the absence of random
responses. Suppose, for example, that everyone prefers a-b-c in that
order. Some respondents will have a recorded response of 1-2-3, while
others will have 3-2-1, given the differently observed sets of items.
Then, in the absence of random responses, the proportion of recorded
responses for each possible ranking should converge to 1/24 = 0.0417,
given that there are 4! = 24 possible ways to rank the items.
Accordingly, a notable deviation from the uniform distribution provides
evidence for the presence of random responses.</p>
<p>What happens with random responses? The figure below shows some
likely scenarios.</p>
<p><img src="../reference/figures/AtsusakaKimFigB2.jpg" width="100%" style="display: block; margin: auto;"></p>
<p>In this hypothetical world, suppose everyone prefers items in the
order of c-b-a. With a reference item set of (a, b, c), the recorded
responses will always be 3-2-1 (panel A). If item order is randomized,
recorded responses will be uniformly distributed (panel D).</p>
<p>Now suppose that random responses occur in patterns such as panels B
and E. If 50% of responses are random, recorded responses will be like
panel C if the reference set is fixed for all respondents, or like panel
F if the reference set is randomized.</p>
</div>
<div class="section level3">
<h3 id="test">Test<a class="anchor" aria-label="anchor" href="#test"></a>
</h3>
<p>The uniformity test checks whether the recorded responses follow a
uniform distribution. Non-uniformity in the test suggests the presence
of random responses.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/uniformity_test.html">uniformity_test</a></span><span class="op">(</span><span class="va">identity</span>, <span class="st">"app_identity"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Chi-squared test for given probabilities</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  tab</span></span>
<span><span class="co">#&gt; X-squared = 765.6, df = 23, p-value &lt; 2.2e-16</span></span></code></pre></div>
<p>The results indicate that the recorded responses are not uniformly
distributed, suggesting random responses in the main identity ranking
question. The uniformity test was also applied to detect ballot order
effects in ranked-choice voting (e.g., <a href="https://doi.org/10.1017/pan.2024.9" class="external-link">Atsusaka (2024)</a>).</p>
</div>
</div>
<div class="section level2">
<h2 id="validity-of-the-anchor-question">Validity of the Anchor Question<a class="anchor" aria-label="anchor" href="#validity-of-the-anchor-question"></a>
</h2>
<p>Checking for uniformity also validates the usage of the anchor
question. Although the assumption in the paper is simply that the
proportion of random responses is the same in the main and the anchor
question, the more implicit assumption is that those who are answering
the anchor question correctly are not providing random responses to the
anchor question.</p>
<p>We can check this by comparing the recorded responses of those who
answered the anchor question correctly and incorrectly.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Correctly answered the anchor question</span></span>
<span><span class="va">tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">identity</span><span class="op">$</span><span class="va">anc_identity_recorded</span><span class="op">[</span><span class="va">identity</span><span class="op">$</span><span class="va">anc_correct_identity</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1234 1243 1324 1342 1423 1432 2134 2143 2314 2341 2413 2431 3124 3142 3214 3241 </span></span>
<span><span class="co">#&gt;  6.5  3.8  3.1  4.2  5.0  4.2  3.1  2.8  3.6  3.3  5.2  4.1  3.8  4.2  5.6  3.2 </span></span>
<span><span class="co">#&gt; 3412 3421 4123 4132 4213 4231 4312 4321 </span></span>
<span><span class="co">#&gt;  4.5  4.4  3.4  4.8  4.0  4.5  4.8  3.8</span></span>
<span><span class="fu"><a href="../reference/uniformity_test.html">uniformity_test</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Chi-squared test for given probabilities</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  data</span></span>
<span><span class="co">#&gt; X-squared = 31.698, df = 23, p-value = 0.1066</span></span>
<span></span>
<span><span class="co">## Incorrectly answered the anchor question</span></span>
<span><span class="va">tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">identity</span><span class="op">$</span><span class="va">anc_identity_recorded</span><span class="op">[</span><span class="va">identity</span><span class="op">$</span><span class="va">anc_correct_identity</span> <span class="op">==</span> <span class="fl">0</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1234 1243 1324 1342 1423 1432 2134 2143 2314 2341 2413 2431 3124 3142 3214 3241 </span></span>
<span><span class="co">#&gt; 13.1  6.4  2.7  2.4  4.3  4.9  7.0  4.6  5.2  3.7  2.4  2.7  3.0  2.1  2.4  3.0 </span></span>
<span><span class="co">#&gt; 3412 3421 4123 4132 4213 4231 4312 4321 </span></span>
<span><span class="co">#&gt;  0.9  3.7  4.0  2.7  3.0  4.6  4.0  7.0</span></span>
<span><span class="fu"><a href="../reference/uniformity_test.html">uniformity_test</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Chi-squared test for given probabilities</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  data</span></span>
<span><span class="co">#&gt; X-squared = 107.95, df = 23, p-value = 5.793e-13</span></span></code></pre></div>
<p>As can be seen, while there is insufficient evidence to reject the
null hypothesis for those who answered the anchor question correctly,
the recorded responses of those who answered the anchor question
incorrectly offer clear evidence for non-uniformity, where about 20% of
respondents submitted either 1234 or 4321.</p>
</div>
<div class="section level2">
<h2 id="caveat-augment-missing-permutation-patterns">Caveat: Augment Missing Permutation Patterns<a class="anchor" aria-label="anchor" href="#caveat-augment-missing-permutation-patterns"></a>
</h2>
<p>One thing to note: in a small sample size, some ranking patterns
might not be realized. For example, in a sample of 10 respondents, it is
possible that the pattern 1234 is not observed. In such cases, it is
important to augment the missing permutation patterns with a count of 0,
which can be done with <code>permn_augment</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">identity</span><span class="op">$</span><span class="va">app_identity_recorded</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tab</span> <span class="co">## only five patterns out of twenty-four possible patterns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1243 1432 2341 4132 4312 </span></span>
<span><span class="co">#&gt;    1    1    1    1    2</span></span>
<span><span class="fu"><a href="../reference/permn_augment.html">permn_augment</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span></span>
<span><span class="co">#&gt; 1234 1243 1324 1342 1423 1432 2134 2143 2314 2341 2413 2431 3124 3142 3214 3241 </span></span>
<span><span class="co">#&gt;    0    1    0    0    0    1    0    0    0    1    0    0    0    0    0    0 </span></span>
<span><span class="co">#&gt; 3412 3421 4123 4132 4213 4231 4312 4321 </span></span>
<span><span class="co">#&gt;    0    0    0    1    0    0    2    0</span></span></code></pre></div>
<p>Within , the function is already called.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://sysilviakim.com" class="external-link">Seo-young Silvia Kim</a>, <a href="https://atsusaka.org" class="external-link">Yuki Atsusaka</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
