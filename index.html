<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Design-Based Methods for Improving Ranking Questions • rankingQ</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Design-Based Methods for Improving Ranking Questions">
<meta name="description" content="A system for implement bias correction that addresses measurement errors due to random responses in ranking survey questions.">
<meta property="og:description" content="A system for implement bias correction that addresses measurement errors due to random responses in ranking survey questions.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">rankingQ</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/basic-setup.html">Basic Setup</a></li>
    <li><a class="dropdown-item" href="articles/bias-correction.html">Correcting Bias in Ranking Data</a></li>
    <li><a class="dropdown-item" href="articles/visualizing-rankings.html">Visualizing Rankings</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sysilviakim/rankingQ/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rankingq-design-based-methods-for-improving-ranking-questions">
<code>rankingQ</code>: Design-Based Methods for Improving Ranking Questions<a class="anchor" aria-label="anchor" href="#rankingq-design-based-methods-for-improving-ranking-questions"></a>
</h1></div>
<p><code>rankingQ</code> implements design-based methods for correcting measurement errors in ranking questions due to random responses. <code>rankingQ</code> allows users to estimate various ranking-based quantities of interest both non-parametrically and parametrically. <code>rankingQ</code> also offers practical tools for detecting the bias and assessing the anchor-ranking question.<br><br>
For the underlying methodology, see Atsusaka and Kim (2024) (<a href="https://osf.io/preprints/osf/3ys8x" class="external-link uri">https://osf.io/preprints/osf/3ys8x</a>).</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>rankingQ</code> can be installed using the following code:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span></span>
<span>  <span class="st">"sysilviakim/rankingQ"</span>,</span>
<span>  dependencies <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p><code>rankingQ</code> assumes a dataset that contains (1) responses to ranking questions with <code>J</code> items and (2) a binary indicator for whether each respondent provides the correct answer to the anchor-ranking question—auxiliary ranking question whose correct answer(s) are known to researchers. For example, the package features a dataset <code>identity</code>, which stores responses to a question that asks respondents to rank four sources of identity (partisanship, race, gender, and religion) based on their relative importance.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sysilviakim/rankingQ" class="external-link">rankingQ</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"identity"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">identity</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#   app_party app_religion app_gender app_race</span></span>
<span><span class="co"># 1         1            4          2        3</span></span>
<span><span class="co"># 2         1            4          2        3</span></span>
<span><span class="co"># 3         3            4          1        2</span></span>
<span><span class="co"># 4         1            4          2        3</span></span>
<span><span class="co"># 5         4            1          3        2</span></span>
<span><span class="co"># 6         3            1          2        4</span></span>
<span><span class="co">#   anc_house anc_neighborhood anc_city anc_state</span></span>
<span><span class="co"># 1           1         2             3          4</span></span>
<span><span class="co"># 2           1         2             3          4</span></span>
<span><span class="co"># 3           1         2             3          4</span></span>
<span><span class="co"># 4           1         2             3          4</span></span>
<span><span class="co"># 5           1         3             2          4</span></span>
<span><span class="co"># 6           1         2             3          4</span></span>
<span><span class="co">#   anc_correct_identity  s_weight</span></span>
<span><span class="co"># 1                    1 0.8439999</span></span>
<span><span class="co"># 2                    1 0.8861603</span></span>
<span><span class="co"># 3                    1 2.9644222</span></span>
<span><span class="co"># 4                    1 0.9866697</span></span>
<span><span class="co"># 5                    0 1.7573136</span></span>
<span><span class="co"># 6                    1 0.4692241</span></span></code></pre></div>
<div class="section level3">
<h3 id="target-ranking-question">Target ranking question<a class="anchor" aria-label="anchor" href="#target-ranking-question"></a>
</h3>
<p>Ranking data are expected to be in the wide format, where multiple columns are used to represent different items and their values represent the items’ marginal ranks. In <code>identity</code>, the four sources of identity are app_party, app_religion, app_gender, and app_race. For example, the first respondent ranked party first, gender second, race third, and religion fourth (i.e., “1423” is the respondent’s outcome).</p>
</div>
<div class="section level3">
<h3 id="anchor-ranking-question">Anchor ranking question<a class="anchor" aria-label="anchor" href="#anchor-ranking-question"></a>
</h3>
<p>To perform bias correction, the data must have what we call the anchor ranking question. The anchor question is an auxiliary ranking question that looks similar to the target question, whose “correct” answer is known to researchers. For example, <code>identity</code> has responses to the anchor question that asked respondents to rank order four levels of government: house, state, municipal, and school board. These responses are included in anc_house, anc_neighborhood, anc_city, and anc_state. Here, the correct answer is assumed to be “1234.” Based on theses responses, we code an indicator variable (anc_correct_identity) that takes 1 if respondents offer the correct answer and 0 otherwise.</p>
</div>
</div>
<div class="section level2">
<h2 id="direct-bias-correction-via-imprr_direct">Direct Bias Correction via <code>imprr_direct</code>
<a class="anchor" aria-label="anchor" href="#direct-bias-correction-via-imprr_direct"></a>
</h2>
<p><code>rankingQ</code> has two primary functions to perform bias correction. First, <code>imprr_direct</code> <strong>impr</strong>oves <strong>r</strong>anking data by applying <strong>direct</strong> bias correction to several classes of quantities of interest.</p>
<p>To apply the bias correction, we specify our dataset (<code>data</code>), the number of items (<code>J</code>), the prefix of column names that contain <code>J</code> items for the target ranking questions, and the prefix of column names for the anchor ranking questions. When survey weights are available, they can be included by specifying <code>weight</code> in the function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Rename the items with a common prefix</span></span>
<span><span class="va">identity</span> <span class="op">&lt;-</span> <span class="va">identity</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rename</span><span class="op">(</span>app_identity_1 <span class="op">=</span> <span class="va">app_party</span>,</span>
<span>         app_identity_2 <span class="op">=</span> <span class="va">app_religion</span>,</span>
<span>         app_identity_3 <span class="op">=</span> <span class="va">app_gender</span>,</span>
<span>         app_identity_4 <span class="op">=</span> <span class="va">app_race</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Perform bias correction</span></span>
<span><span class="va">out_direct</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/imprr_direct.html">imprr_direct</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">identity</span>,</span>
<span>  J <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  main_q <span class="op">=</span> <span class="st">"app_identity"</span>,</span>
<span>  anc_correct <span class="op">=</span> <span class="st">"anc_correct_identity"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="view-results-estimated-proportion-of-random-responses">View Results: Estimated Proportion of Random Responses<a class="anchor" aria-label="anchor" href="#view-results-estimated-proportion-of-random-responses"></a>
</h3>
<p>The first output of <code>imprr_direct</code> is the estimated proportion of random responses. The vector <code>est_p_random</code> returns the estimated proportion along with the lower and upper ends of its corresponding 95% confidence interval.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Estimated proportion of random responses with a 95% CI </span></span>
<span><span class="va">out_direct</span><span class="op">$</span><span class="va">est_p_random</span></span>
<span><span class="co">#        mean     lower     upper</span></span>
<span><span class="co"># 1 0.3153146 0.2864261 0.3481958</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="view-results-estimated-quantities-of-interest">View Results: Estimated Quantities of Interest<a class="anchor" aria-label="anchor" href="#view-results-estimated-quantities-of-interest"></a>
</h3>
<p>The other output is the bias-corrected estimates of four classes of ranking-based quantities, including</p>
<ol style="list-style-type: decimal">
<li>average ranks</li>
<li>pairwise ranking probabilities</li>
<li>top-k ranking probabilities</li>
<li>marginal ranking probabilities</li>
</ol>
<p>The output tibble <code>qoi</code> stores the estimated quantities and their corresponding 95% CIs.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># View the results based on the quantity of interest</span></span>
<span><span class="va">out_direct</span><span class="op">$</span><span class="va">qoi</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">qoi</span> <span class="op">==</span> <span class="st">"average rank"</span><span class="op">)</span></span>
<span><span class="co"># A tibble: 4 × 6</span></span>
<span><span class="co"># # Groups:   item, qoi [4]</span></span>
<span><span class="co">#   item     qoi          outcome              mean lower upper</span></span>
<span><span class="co">#   &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co"># 1 party    average rank Avg: app_identity_1  3.27  3.18  3.37</span></span>
<span><span class="co"># 2 religion average rank Avg: app_identity_2  2.60  2.49  2.71</span></span>
<span><span class="co"># 3 gender   average rank Avg: app_identity_3  1.65  1.56  1.73</span></span>
<span><span class="co"># 4 race     average rank Avg: app_identity_4  2.48  2.40  2.57</span></span>
<span></span>
<span><span class="co"># View the results based on the item</span></span>
<span><span class="va">out_direct</span><span class="op">$</span><span class="va">qoi</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">item</span> <span class="op">==</span> <span class="st">"party"</span><span class="op">)</span></span>
<span>   </span>
<span><span class="co"># # A tibble: 11 × 6</span></span>
<span><span class="co"># # Groups:   item, qoi [4]</span></span>
<span><span class="co">#    item  qoi              outcome             mean  lower  upper</span></span>
<span><span class="co">#    &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#  1 party average rank     Avg: app_identit… 3.27   3.18   3.37  </span></span>
<span><span class="co">#  2 party marginal ranking Ranked 1          0.0409 0.0123 0.0729</span></span>
<span><span class="co">#  3 party marginal ranking Ranked 2          0.152  0.121  0.181 </span></span>
<span><span class="co">#  4 party marginal ranking Ranked 3          0.303  0.264  0.343 </span></span>
<span><span class="co">#  5 party marginal ranking Ranked 4          0.505  0.460  0.552 </span></span>
<span><span class="co">#  6 party pairwise ranking v. app_identity_2 0.355  0.306  0.399 </span></span>
<span><span class="co">#  7 party pairwise ranking v. app_identity_3 0.106  0.0672 0.143 </span></span>
<span><span class="co">#  8 party pairwise ranking v. app_identity_4 0.268  0.227  0.312 </span></span>
<span><span class="co">#  9 party top-k ranking    Top-1             0.0409 0.0123 0.0729</span></span>
<span><span class="co"># 10 party top-k ranking    Top-2             0.308  0.269  0.347 </span></span>
<span><span class="co"># 11 party top-k ranking    Top-3             0.726  0.678  0.776 </span></span></code></pre></div>
<p>For example, one can visualize the result for average ranks as follows:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot the result</span></span>
<span><span class="va">out_direct</span><span class="op">$</span><span class="va">qoi</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">qoi</span> <span class="op">==</span> <span class="st">"average rank"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">mean</span>, y <span class="op">=</span> <span class="va">item</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_linerange</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>xmin <span class="op">=</span> <span class="va">lower</span>, xmax <span class="op">=</span> <span class="va">upper</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">xlab</span><span class="op">(</span><span class="st">"average rank"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ylab</span><span class="op">(</span><span class="st">""</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/average-rank.png" width="55%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="weighting-based-bias-correction-via-imprr_weight">Weighting-Based Bias Correction via <code>imprr_weight</code>
<a class="anchor" aria-label="anchor" href="#weighting-based-bias-correction-via-imprr_weight"></a>
</h2>
<p>The alternative methods for bias correction is based on the idea of inverse-prbability weighting. <code>imprr_weight</code> <strong>impr</strong>oves <strong>r</strong>anking data by computing bias correction <strong>weights</strong>, which can be used to correct for the bias in the inverse-probability weighting framework. The same arguments previously used can be used as follows:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Perform bias correction</span></span>
<span><span class="va">out_weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/imprr_weights.html">imprr_weights</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">identity</span>,</span>
<span>  J <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  main_q <span class="op">=</span> <span class="st">"app_identity"</span>,</span>
<span>  anc_correct <span class="op">=</span> <span class="st">"anc_correct_identity"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="view-results-estimated-weights">View Results: Estimated Weights<a class="anchor" aria-label="anchor" href="#view-results-estimated-weights"></a>
</h3>
<p>The output of <code>imprr_weights</code> contains the set of weights for all possible ranking profiles with <code>J</code> items. For example, when <code>J = 4</code>, the set has <code>{1234, 1243, ..., 4321}</code> and each profile now has an estimated weight.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># View the estimated weights</span></span>
<span><span class="va">out_weights</span><span class="op">$</span><span class="va">weights</span></span>
<span><span class="co">#    ranking         w</span></span>
<span><span class="co"># 1     1234 0.0000000</span></span>
<span><span class="co"># 2     1243 0.0000000</span></span>
<span><span class="co"># 3     1324 0.0000000</span></span>
<span><span class="co"># 4     1342 0.0000000</span></span>
<span><span class="co"># 5     1423 1.0158812</span></span>
<span><span class="co"># 6     1432 0.4078355</span></span>
<span><span class="co"># 7     2134 0.8582397</span></span>
<span><span class="co"># 8     2143 0.8070574</span></span>
<span><span class="co"># 9     2314 0.7456387</span></span>
<span><span class="co"># 10    2341 0.0000000</span></span>
<span><span class="co"># 11    2413 1.1316994</span></span>
<span><span class="co"># 12    2431 0.5767371</span></span>
<span><span class="co"># 13    3124 1.0238295</span></span>
<span><span class="co"># 14    3142 0.5400194</span></span>
<span><span class="co"># 15    3214 0.8251218</span></span>
<span><span class="co"># 16    3241 0.0000000</span></span>
<span><span class="co"># 17    3412 1.2733020</span></span>
<span><span class="co"># 18    3421 1.0314721</span></span>
<span><span class="co"># 19    4123 1.2628998</span></span>
<span><span class="co"># 20    4132 1.1045545</span></span>
<span><span class="co"># 21    4213 1.0388263</span></span>
<span><span class="co"># 22    4231 0.4999637</span></span>
<span><span class="co"># 23    4312 1.2711103</span></span>
<span><span class="co"># 24    4321 1.0593130</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="view-results-estimated-pmf-with-raw-data-and-bias-corrected-data">View Results: Estimated PMF with Raw Data and Bias Corrected Data<a class="anchor" aria-label="anchor" href="#view-results-estimated-pmf-with-raw-data-and-bias-corrected-data"></a>
</h3>
<p><code>imprr_weight</code> also returns the estimated probability mass function of all ranking profile before and after bias correction.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co"># View the estimated PMF with raw data and weighted data</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="sc">&gt;</span> out_weights<span class="sc">$</span>corrected_pmf <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="fu">select</span>(ranking, prop, prop_renormalized)</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#    ranking          prop prop_renormalized</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co"># 1     1234 -0.0003526508       0.000000000</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co"># 2     1243 -0.0044081345       0.000000000</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co"># 3     1324 -0.0003526508       0.000000000</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co"># 4     1342 -0.0098154461       0.000000000</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co"># 5     1423  0.0483131539       0.046944603</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co"># 6     1432  0.0077583167       0.007538549</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co"># 7     2134  0.0293875632       0.028555111</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co"># 8     2143  0.0253320795       0.024614506</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co"># 9     2314  0.0212765957       0.020673901</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="co"># 10    2341 -0.0111672740       0.000000000</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="co"># 11    2413  0.0753497120       0.073215306</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="co"># 12    2431  0.0131656283       0.012792690</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="co"># 13    3124  0.0496649818       0.048258138</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="co"># 14    3142  0.0118138004       0.011479155</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a><span class="co"># 15    3214  0.0266839074       0.025928041</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="co"># 16    3241 -0.0030563066       0.000000000</span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a><span class="co"># 17    3412  0.1659221817       0.161222159</span></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="co"># 18    3421  0.0510168097       0.049571673</span></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a><span class="co"># 19    4123  0.1537557306       0.149400343</span></span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a><span class="co"># 20    4132  0.0672387446       0.065334095</span></span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a><span class="co"># 21    4213  0.0523686376       0.050885208</span></span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a><span class="co"># 22    4231  0.0104619725       0.010165620</span></span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a><span class="co"># 23    4312  0.1632185259       0.158595089</span></span>
<span id="cb9-30"><a href="#cb9-30" tabindex="-1"></a><span class="co"># 24    4321  0.0564241213       0.054825814</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="merge-estimated-weights-with-original-data">Merge Estimated Weights with Original Data<a class="anchor" aria-label="anchor" href="#merge-estimated-weights-with-original-data"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Turn the results into a tibble</span></span>
<span><span class="va">tibble_w</span> <span class="op">&lt;-</span> <span class="va">out_weights</span><span class="op">$</span><span class="va">weights</span> <span class="op">%&gt;%</span> <span class="fu">tibble</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Merge the weights back to the original data</span></span>
<span><span class="va">identity_w</span> <span class="op">&lt;-</span> <span class="va">identity</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">unite</span><span class="op">(</span><span class="va">ranking</span>, <span class="fu">starts_with</span><span class="op">(</span><span class="st">"app_identity"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">""</span>, remove <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">tibble_w</span>, by <span class="op">=</span> <span class="st">"ranking"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">w</span>, <span class="fu">everything</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>item <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="va">item</span> <span class="op">==</span> <span class="st">"app_identity_1"</span> <span class="op">~</span> <span class="st">"party"</span>,</span>
<span>                          <span class="va">item</span> <span class="op">==</span> <span class="st">"app_identity_2"</span> <span class="op">~</span> <span class="st">"religion"</span>,</span>
<span>                          <span class="va">item</span> <span class="op">==</span> <span class="st">"app_identity_3"</span> <span class="op">~</span> <span class="st">"gender"</span>,</span>
<span>                          <span class="va">item</span> <span class="op">==</span> <span class="st">"app_identity_4"</span> <span class="op">~</span> <span class="st">"race"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># head(identity_w)</span></span>
<span><span class="co">#       w ranking party religion gender  race anc_house anc_neighborhood</span></span>
<span><span class="co">#   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span><span class="co"># 1  1.02 1423        1        4      2     3           1         2</span></span>
<span><span class="co"># 2  1.02 1423        1        4      2     3           1         2</span></span>
<span><span class="co"># 3  1.27 3412        3        4      1     2           1         2</span></span>
<span><span class="co"># 4  1.02 1423        1        4      2     3           1         2</span></span>
<span><span class="co"># 5  1.10 4132        4        1      3     2           1         3</span></span>
<span><span class="co"># 6  1.02 3124        3        1      2     4           1         2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="analysis">Analysis<a class="anchor" aria-label="anchor" href="#analysis"></a>
</h3>
<p>The estimated weights can be used to perform any analyses. For example, to estimate the average rank of party, one can leverage linear regression as follows:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://declaredesign.org/r/estimatr/" class="external-link">estimatr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://declaredesign.org/r/estimatr/reference/lm_robust.html" class="external-link">lm_robust</a></span><span class="op">(</span><span class="va">party</span> <span class="op">~</span> <span class="fl">1</span>, <span class="va">identity_w</span>, weights <span class="op">=</span> <span class="va">w</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#          term estimate  std.error statistic p.value conf.low</span></span>
<span><span class="co"># 1 (Intercept) 3.220388 0.02790142  115.4202       0 3.165641</span></span>
<span><span class="co">#   conf.high   df outcome</span></span>
<span><span class="co"># 1  3.275135 1081   party</span></span></code></pre></div>
<p>While this illustrative example provides a valid point estimate, its confidence interval does not account for the estimation uncertainty around the estimated weights. Thus, in practice, <code>imprr_weights</code> must be used along with bootstrapping, such as the one available in <code>rsample</code> (<a href="https://declaredesign.org/r/estimatr/articles/estimatr-in-the-tidyverse.html#bootstrap-using-rsample" class="external-link">example</a>).</p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Atsusaka, Y., &amp; Kim, S.S. (2024). Addressing Measurement Errors in Ranking Questions for the Social Sciences. <em>Political Analysis</em> (conditionally accepted). <a href="https://osf.io/preprints/osf/3ys8x" class="external-link uri">https://osf.io/preprints/osf/3ys8x</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/sysilviakim/rankingQ/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/sysilviakim/rankingQ/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rankingQ</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Seo-young Silvia Kim <br><small class="roles"> Author </small>  </li>
<li>Yuki Atsusaka <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5365-1876" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Seo-young Silvia Kim, Yuki Atsusaka.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
